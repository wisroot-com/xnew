<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="../dist/xnew.js"></script>
</head>

<body>
    <script>
        xnew((xnode) => {
            xnode.nestElement({ tag: 'button', style: 'padding: 8px;' });
            xnode.element.textContent = 'click'

            let counter = 0;
            xnode.on('click', () => {
                xnode.emit('#countup');
            });
            xnode.on('#countup countup', () => {
                xnode.element.textContent = ++counter + ' clicked';
            })
            xnode.off('#countup countup',);
        });

        xnew((xnode) => {
            xnode.nestElement({ style: 'padding: 8px;' });
            xnode.element.textContent = 'counter: 0';

            let counter = 0;
            const timer = xnode.setTimer(() => {
                xnode.element.textContent = 'counter: ' + (++counter);
            }, 1000, true);

            xnode.setTimer(() => {
                timer.clear();
            }, 5000);
        });
        xnew((xnode) => {
            return {
                promise: 1,
                start: 1,
                update: 1,
                stop: 1,
                finalize: 1,
            }
        });
        
        xnew((xnode) => {
            xnew((xnode) => {
                xnode.key = 'aaa';
                return { name: 'node1',}
            });
            xnew((xnode) => {
                xnode.key ='bbb';
                return { name: 'node2', }
            });
            xnew((xnode) => {
                xnode.key = 'bbb ccc';
                return { name: 'node3', }
            });

            xnew((xnode) => {
                xnew(`xfind('aaa') : ` + names(xfind('aaa')));
                xnew(`xfind('bbb') : ` + names(xfind('bbb')));
                xnew(`xfind('ccc') : ` + names(xfind('ccc')));
                xnew(`xfind('aaa bbb') : ` + names(xfind('aaa bbb')));

                function names(xnodes) {
                    return xnodes.reduce((a, c) => a + c.name + ',', '');
                }
            });
        });
    </script>
</body>
</html>